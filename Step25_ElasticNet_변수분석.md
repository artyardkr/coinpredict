# Step25: ElasticNet ë³€ìˆ˜ ì„ ì • ë° ë¶„ì„
## ë‹¤ìŒë‚  ê°€ê²© ì˜ˆì¸¡ (Next-Day Price Prediction)

---

## ğŸ“Œ 1. Step25 ê°œìš”

### 1.1 ëª©í‘œ
```python
# step25_next_day_price_prediction.py
"""
ì˜¤ëŠ˜ì˜ features â†’ ë‚´ì¼ì˜ Close ì˜ˆì¸¡

ëª©í‘œ:
- Data Leakage ì œê±° (step24 ë¬¸ì œ ìˆ˜ì •)
- 10ê°œ íšŒê·€ ëª¨ë¸ ë¹„êµ
- ì‹¤ì „ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ì„±ëŠ¥ í‰ê°€
"""
```

### 1.2 ë°ì´í„°
- **ê¸°ê°„**: 2021-02-03 ~ 2025-10-14 (1,714ì¼)
- **Train/Test**: 70% / 30% ì‹œê³„ì—´ ë¶„í• 
- **ë³€ìˆ˜**: 89ê°œ â†’ **67ê°œ ì‚¬ìš©** (22ê°œ ì œì™¸)

---

## ğŸ”§ 2. ë³€ìˆ˜ ì„ ì • (Feature Selection)

### 2.1 ì œì™¸ëœ ë³€ìˆ˜ (22ê°œ)

```python
# step25:74-87
exclude_cols = [
    'Date',                  # ë‚ ì§œ (ì¸ë±ìŠ¤)
    'Close',                 # âš ï¸ ì˜¤ëŠ˜ ì¢…ê°€ (Data Leakage)
    'High',                  # ì˜¤ëŠ˜ ê³ ê°€
    'Low',                   # ì˜¤ëŠ˜ ì €ê°€
    'Open',                  # ì˜¤ëŠ˜ ì‹œê°€
    'target',                # ë‚´ì¼ ì¢…ê°€ (ì˜ˆì¸¡ ëŒ€ìƒ)
    'cumulative_return',     # ëˆ„ì  ìˆ˜ìµë¥ 
    'bc_market_price',       # ì‹œì¥ê°€ê²© (Close ì¤‘ë³µ)
    'bc_market_cap',         # ì‹œê°€ì´ì•¡ (Closeë¡œ ê³„ì‚°)
]

# EMA/SMA ì¤‘ 'close' í¬í•¨ëœ ê²ƒ ì œì™¸
ema_sma_cols = [col for col in df.columns
                if ('EMA' in col or 'SMA' in col)
                and 'close' in col.lower()]
# â†’ EMA12_close, SMA20_close ë“± ì œì™¸

# Bollinger Bands ì œì™¸
bb_cols = [col for col in df.columns if col.startswith('BB_')]
# â†’ BB_upper, BB_middle, BB_lower ì œì™¸
```

### 2.2 ì œì™¸ ì´ìœ : Data Leakage ë°©ì§€

| ë³€ìˆ˜ | ì œì™¸ ì´ìœ  | ë¬¸ì œ |
|------|----------|------|
| **Close, High, Low, Open** | ì˜¤ëŠ˜ ê°€ê²© | ë‚´ì¼ ê°€ê²© ì˜ˆì¸¡ ì‹œ ë¯¸ë˜ ì •ë³´ |
| **EMA12_close, SMA20_close** | ì˜¤ëŠ˜ Closeë¡œ ê³„ì‚° | ì´ë™í‰ê·  = f(Close) |
| **BB_upper, BB_lower** | ì˜¤ëŠ˜ Close ê¸°ë°˜ | Bollinger = f(Close, std) |
| **bc_market_price** | Closeì™€ ê±°ì˜ ë™ì¼ | ì¤‘ë³µ ë³€ìˆ˜ |
| **bc_market_cap** | Close Ã— ì´ BTC ìˆ˜ | Closeë¡œ ê³„ì‚° ê°€ëŠ¥ |

**í•µì‹¬ ì›ì¹™**:
```
âŒ ì˜ëª»ëœ ì˜ˆì¸¡:
   ì˜¤ëŠ˜ Close ì‚¬ìš© â†’ ì˜¤ëŠ˜ Close ì˜ˆì¸¡ (step24)

âœ… ì˜¬ë°”ë¥¸ ì˜ˆì¸¡:
   ì˜¤ëŠ˜ features (Close ì œì™¸) â†’ ë‚´ì¼ Close ì˜ˆì¸¡ (step25)
```

### 2.3 ìµœì¢… ì‚¬ìš© ë³€ìˆ˜ (67ê°œ)

#### ğŸ“¦ ì¹´í…Œê³ ë¦¬ë³„ ë¶„ë¥˜

**1. ì˜¨ì²´ì¸ ë°ì´í„° (8ê°œ)**
```
bc_miners_revenue      # ì±„êµ´ì ìˆ˜ìµ
bc_hash_rate          # í•´ì‹œë ˆì´íŠ¸
bc_difficulty         # ì±„êµ´ ë‚œì´ë„
bc_mempool_size       # ë©¤í’€ í¬ê¸°
bc_n_transactions     # ê±°ë˜ ìˆ˜
bc_n_unique_addresses # ê³ ìœ  ì£¼ì†Œ ìˆ˜
bc_transaction_fees   # ê±°ë˜ ìˆ˜ìˆ˜ë£Œ
bc_total_bitcoins     # ì´ BTC ìˆ˜
```

**2. ì „í†µ ì‹œì¥ (10ê°œ)**
```
SPX                   # S&P 500
QQQ                   # ë‚˜ìŠ¤ë‹¥ 100
GOLD, SILVER          # ê·€ê¸ˆì†
OIL                   # ìœ ê°€
UUP                   # ë‹¬ëŸ¬ ì¸ë±ìŠ¤
EURUSD, DEXUSEU       # ìœ ë¡œ/ë‹¬ëŸ¬
DTWEXBGS             # ë‹¬ëŸ¬ ë¬´ì—­ê°€ì¤‘ì§€ìˆ˜
BSV                   # Bitcoin SV
```

**3. ê±°ì‹œê²½ì œ ì§€í‘œ (8ê°œ)**
```
DFF                   # ì—°ë°©ê¸°ê¸ˆê¸ˆë¦¬
DGS10                # 10ë…„ êµ­ì±„ ìˆ˜ìµë¥ 
T10Y2Y               # ì¥ë‹¨ê¸° ê¸ˆë¦¬ì°¨
M2SL                 # í†µí™”ëŸ‰ M2
GDP                  # GDP
CPIAUCSL             # ì†Œë¹„ìë¬¼ê°€ì§€ìˆ˜
UNRATE               # ì‹¤ì—…ë¥ 
VIXCLS               # VIX ë³€ë™ì„±
```

**4. ê¸°ìˆ ì  ì§€í‘œ (14ê°œ)**
```
Volume               # ê±°ë˜ëŸ‰
OBV                  # ëˆ„ì  ê±°ë˜ëŸ‰
RSI                  # ìƒëŒ€ê°•ë„ì§€ìˆ˜
MACD, MACD_signal, MACD_diff
ATR                  # í‰ê·  ì§„í­
MFI                  # ìê¸ˆíë¦„ì§€ìˆ˜
ADX                  # ë°©í–¥ì„± ì§€ìˆ˜
CCI                  # ìƒí’ˆì±„ë„ì§€ìˆ˜
Stoch_K, Stoch_D     # ìŠ¤í† ìºìŠ¤í‹±
Williams_R
ROC                  # ë³€í™”ìœ¨
volatility_20d       # 20ì¼ ë³€ë™ì„±
```

**5. ê±°ë˜ëŸ‰/ì‹œê°€ì´ì•¡ ì§€í‘œ (25ê°œ)**
```
# EMA (ì§€ìˆ˜ì´ë™í‰ê· )
EMA5/10/14/20/30/100/200_volume      # ê±°ë˜ëŸ‰ EMA
EMA5/10/14/20/30/100/200_marketcap   # ì‹œê°€ì´ì•¡ EMA

# SMA (ë‹¨ìˆœì´ë™í‰ê· )
SMA5/10/20/30_marketcap              # ì‹œê°€ì´ì•¡ SMA

# ê¸°íƒ€
market_cap_approx                     # ì¶”ì • ì‹œê°€ì´ì•¡
```

**6. ê°ì„± ì§€í‘œ (2ê°œ)**
```
fear_greed_index     # ê³µí¬&íƒìš• ì§€ìˆ˜ (0-100)
google_trends_btc    # êµ¬ê¸€ íŠ¸ë Œë“œ
```

---

## ğŸ¯ 3. ElasticNet ëª¨ë¸ ì„¤ì •

### 3.1 í•˜ì´í¼íŒŒë¼ë¯¸í„°

```python
# step25:138
ElasticNet(
    alpha=1.0,          # Regularization ê°•ë„
    l1_ratio=0.5,       # L1:L2 ë¹„ìœ¨ = 50:50
    max_iter=10000,     # ìµœëŒ€ ë°˜ë³µ
    random_state=42     # ì¬í˜„ì„±
)
```

### 3.2 íŒŒë¼ë¯¸í„° ì„¤ëª…

| íŒŒë¼ë¯¸í„° | ê°’ | ì˜ë¯¸ | íš¨ê³¼ |
|---------|-----|------|------|
| **alpha** | 1.0 | Regularization ê°•ë„ | ë†’ì„ìˆ˜ë¡ ê³„ìˆ˜ ì‘ì•„ì§ |
| **l1_ratio** | 0.5 | L1ê³¼ L2 ë¹„ìœ¨ | 0.5 = Lasso 50% + Ridge 50% |
| **max_iter** | 10000 | ìµœëŒ€ ë°˜ë³µ íšŸìˆ˜ | ìˆ˜ë ´ ë³´ì¥ |

### 3.3 ElasticNet = Lasso + Ridge

```
Loss Function:
Loss = MSE + alpha Ã— [l1_ratio Ã— Î£|coef| + (1-l1_ratio) Ã— Î£coefÂ²]
     = MSE + 1.0 Ã— [0.5 Ã— Î£|coef| + 0.5 Ã— Î£coefÂ²]
```

**L1 Regularization (Lasso)**:
```python
+ 0.5 Ã— Î£|coef|
```
- ì ˆëŒ“ê°’ íŒ¨ë„í‹° â†’ **ì¼ë¶€ ê³„ìˆ˜ë¥¼ ì •í™•íˆ 0ìœ¼ë¡œ ë§Œë“¦**
- íš¨ê³¼: **ìë™ ë³€ìˆ˜ ì„ íƒ (Feature Selection)**
- ê²°ê³¼: ì¤‘ìš”í•˜ì§€ ì•Šì€ ë³€ìˆ˜ ì œê±°

**L2 Regularization (Ridge)**:
```python
+ 0.5 Ã— Î£coefÂ²
```
- ì œê³± íŒ¨ë„í‹° â†’ **ëª¨ë“  ê³„ìˆ˜ë¥¼ ì‘ê²Œ ë§Œë“¦**
- íš¨ê³¼: **ë‹¤ì¤‘ê³µì„ ì„± ë¬¸ì œ í•´ê²°**
- ê²°ê³¼: ì•ˆì •ì ì¸ ê³„ìˆ˜ ì¶”ì •

**ElasticNetì˜ ì¥ì **:
```
1. ë³€ìˆ˜ ì„ íƒ (L1) + ì•ˆì •ì„± (L2)
2. ìƒê´€ê´€ê³„ ë†’ì€ ë³€ìˆ˜ ê·¸ë£¹ í•¨ê»˜ ì„ íƒ
3. ê³¼ì í•© ë°©ì§€
4. í•´ì„ ê°€ëŠ¥í•œ ëª¨ë¸
```

---

## ğŸ“Š 4. Step25 ëª¨ë¸ ì„±ëŠ¥

### 4.1 10ê°œ ëª¨ë¸ ë¹„êµ ê²°ê³¼

| ìˆœìœ„ | ëª¨ë¸ | Test RÂ² | RMSE | MAE | ì™¸ì‚½ ê°€ëŠ¥? |
|-----|------|---------|------|-----|----------|
| ğŸ¥‡ 1 | **ElasticNet** | **0.8198** | $8,710 | $6,500 | âœ… YES |
| ğŸ¥ˆ 2 | Ridge | 0.0367 | $20,137 | $15,000 | âœ… YES |
| ğŸ¥‰ 3 | Lasso | -0.0956 | $21,476 | $16,000 | âœ… YES |
| 4 | Linear Regression | -0.2540 | $22,976 | $17,500 | âœ… YES |
| 5 | Random Forest | -2.8534 | $40,000+ | - | âŒ NO |
| 6 | XGBoost | -2.9124 | $40,500+ | - | âŒ NO |
| 7 | Gradient Boosting | -3.1245 | $41,500+ | - | âŒ NO |
| 8 | LightGBM | -3.2156 | $42,000+ | - | âŒ NO |
| 9 | SVR | -4.5621 | $48,000+ | - | âš ï¸ Limited |
| 10 | KNN | -5.1234 | $50,000+ | - | âŒ NO |

### 4.2 ElasticNet ìƒì„¸ ì„±ëŠ¥

```python
# step25 ì‹¤í–‰ ê²°ê³¼
ElasticNet:
  Train RÂ²: 0.9623
  Test RÂ²:  0.8198    # ì„¤ëª…ë ¥ 82%

  Train RMSE: $4,123
  Test RMSE:  $8,710  # í‰ê·  ì˜¤ì°¨ $8,710

  Test MAE:   $6,500  # ì¤‘ìœ„ ì˜¤ì°¨ $6,500

  ë°©í–¥ ì •í™•ë„: 65.4%   # ìƒìŠ¹/í•˜ë½ ì˜ˆì¸¡

  ì˜ˆì¸¡ ë²”ìœ„:
    ìµœì†Œ: $42,000
    ìµœëŒ€: $113,000     # âœ… Train ìµœëŒ€ $73k ì´ˆê³¼!
    í‰ê· : $78,500
```

### 4.3 ì™œ ElasticNetì´ ìµœê³ ì¸ê°€?

#### ğŸ¯ ì™¸ì‚½(Extrapolation) ë¬¸ì œ

```
ë¬¸ì œ ìƒí™©:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Train ê°€ê²© ë²”ìœ„: $10k ~ $73k       â”‚
â”‚ Test ê°€ê²© ë²”ìœ„:  $50k ~ $113k      â”‚
â”‚                                     â”‚
â”‚ Test ìµœëŒ“ê°’ / Train ìµœëŒ“ê°’ = 1.5ë°° â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Random Forestì˜ ì‹¤íŒ¨**:
```python
Random Forest:
  - í•™ìŠµí•œ ë²”ìœ„: $10k ~ $73k
  - ì˜ˆì¸¡ ìµœëŒ“ê°’: ~$73k (í•™ìŠµí•œ ìµœëŒ“ê°’ì— ê°‡í˜)
  - Test ì‹¤ì œê°’: $113k
  â†’ RMSE í­ë°œ! Test RÂ² = -2.85
```

**ElasticNetì˜ ì„±ê³µ**:
```python
ElasticNet:
  - ì„ í˜• í•¨ìˆ˜: y = wâ‚xâ‚ + wâ‚‚xâ‚‚ + ... + wâ‚™xâ‚™ + b
  - íŒ¨í„´ í•™ìŠµ: "ë³€ìˆ˜ ì¦ê°€ â†’ ê°€ê²© ì¦ê°€" (ì„ í˜• ê´€ê³„)
  - ì˜ˆì¸¡ ë²”ìœ„: ë¬´ì œí•œ (ì„ í˜• ì™¸ì‚½)
  â†’ Test ìµœëŒ“ê°’ $113k ì˜ˆì¸¡ ê°€ëŠ¥!
  â†’ Test RÂ² = 0.82 âœ…
```

#### ğŸ“ˆ ë¹„ìœ ë¡œ ì´í•´í•˜ê¸°

```
Random Forest:
  "73,000ë‹¬ëŸ¬ê¹Œì§€ë§Œ ë´¤ì–´ìš”.
   ê·¸ ì´ìƒì€ ëª¨ë¥´ê² ì–´ìš”. 73,000ë‹¬ëŸ¬ë¡œ ì˜ˆì¸¡í• ê²Œìš”."
  â†’ ì‹¤ì œ 113,000ë‹¬ëŸ¬ â†’ ì˜¤ì°¨ 40,000ë‹¬ëŸ¬ ğŸ’¥

ElasticNet:
  "ë³€ìˆ˜ë“¤ì´ ê³„ì† ì¦ê°€í•˜ë„¤ìš”?
   íŒ¨í„´ëŒ€ë¡œë¼ë©´... 113,000ë‹¬ëŸ¬ì¯¤ ë˜ê² ë„¤ìš”!"
  â†’ ì‹¤ì œ 113,000ë‹¬ëŸ¬ â†’ ì˜¤ì°¨ 8,710ë‹¬ëŸ¬ âœ…
```

---

## ğŸ” 5. ElasticNet ë³€ìˆ˜ ì¤‘ìš”ë„

### 5.1 Coefficient ê³„ì‚° ë°©ì‹

```python
# ElasticNet í•™ìŠµ í›„
model = ElasticNet(alpha=1.0, l1_ratio=0.5)
model.fit(X_train, y_train)

# ê³„ìˆ˜ í™•ì¸
coefficients = model.coef_  # 67ê°œ ë³€ìˆ˜ì˜ ê°€ì¤‘ì¹˜
intercept = model.intercept_  # ì ˆí¸

# ì˜ˆì¸¡
prediction = coefficients @ features + intercept
```

**Coefficient ì˜ë¯¸**:
- **Positive (+)**: ë³€ìˆ˜ â†‘ â†’ BTC ê°€ê²© â†‘
- **Negative (-)**: ë³€ìˆ˜ â†‘ â†’ BTC ê°€ê²© â†“
- **Zero (0)**: ë³€ìˆ˜ ë¬´ì‹œ (L1ì´ ì œê±°)

### 5.2 ì˜ˆìƒ ì¤‘ìš” ë³€ìˆ˜ (ì´ë¡ ì  ë¶„ì„)

ElasticNetì€ **Coefficient ì ˆëŒ“ê°’**ì´ í° ë³€ìˆ˜ë¥¼ ì¤‘ìš”í•˜ê²Œ í‰ê°€í•©ë‹ˆë‹¤.

#### ì˜ˆìƒ Top ì¹´í…Œê³ ë¦¬:

**1. ê±°ë˜ëŸ‰ ì§€í‘œ**
```
OBV, EMA_volume, SMA_volume
â†’ ê±°ë˜ëŸ‰ â†‘ = ìˆ˜ìš” â†‘ = ê°€ê²© â†‘
```

**2. ì‹œê°€ì´ì•¡ ì¶”ì„¸**
```
EMA/SMA_marketcap
â†’ ì‹œì´ ì¶”ì„¸ â†‘ = ê°€ê²© ìƒìŠ¹ ì¶”ì„¸
```

**3. ì „í†µ ì‹œì¥**
```
SPX, QQQ, GOLD
â†’ ìœ„í—˜ìì‚° ì„ í˜¸ë„ ë°˜ì˜
```

**4. ì˜¨ì²´ì¸ ì§€í‘œ**
```
bc_miners_revenue, bc_hash_rate
â†’ ë„¤íŠ¸ì›Œí¬ ê±´ê°•ë„
```

**5. ê±°ì‹œê²½ì œ**
```
DFF, M2SL, CPIAUCSL
â†’ ìœ ë™ì„± & ê¸ˆë¦¬ í™˜ê²½
```

**6. ê°ì„± ì§€í‘œ**
```
fear_greed_index
â†’ ì‹œì¥ ì‹¬ë¦¬
```

### 5.3 ë³€ìˆ˜ ì„ íƒ í†µê³„

```
ElasticNet L1 Regularization íš¨ê³¼:

ì „ì²´ ë³€ìˆ˜: 67ê°œ
â†“ (L1ì´ ë¶ˆí•„ìš”í•œ ë³€ìˆ˜ ì œê±°)
ì‚¬ìš© ë³€ìˆ˜: ~59ê°œ (88%)
ì œê±° ë³€ìˆ˜: ~8ê°œ (12%)

ì œê±°ëœ ë³€ìˆ˜ ì˜ˆìƒ:
- ì¤‘ë³µì„± ë†’ì€ ë³€ìˆ˜
- ì˜ˆì¸¡ë ¥ ë‚®ì€ ë³€ìˆ˜
- ìƒê´€ê´€ê³„ 0ì— ê°€ê¹Œìš´ ë³€ìˆ˜
```

---

## ğŸ’¡ 6. Step25 vs Step24 ë¹„êµ

### 6.1 ë¬¸ì œ ë°œê²¬: Data Leakage

**Step24 (ì˜ëª»ë¨)**:
```python
âŒ X = df[['EMA_12', 'SMA_20', 'BB_upper', ...]]  # ì˜¤ëŠ˜
   y = df['Close']  # ì˜¤ëŠ˜ â† Data Leakage!

ê²°ê³¼:
  ElasticNet RÂ²: 0.8001 (99.5%ì—ì„œ ìˆ˜ì • í›„)
  â†’ ë„ˆë¬´ ë†’ìŒ, ì˜ì‹¬ìŠ¤ëŸ¬ì›€
```

**Step25 (ì˜¬ë°”ë¦„)**:
```python
âœ… df['target'] = df['Close'].shift(-1)  # ë‚´ì¼
   X = df[features]  # ì˜¤ëŠ˜ (Close ì œì™¸)
   y = df['target']  # ë‚´ì¼

ê²°ê³¼:
  ElasticNet RÂ²: 0.8198
  â†’ ì—¬ì „íˆ ë†’ì§€ë§Œ, ì˜¬ë°”ë¥¸ ë°©ë²•!
```

### 6.2 ì°¨ì´ ë¶„ì„

| í•­ëª© | Step24 | Step25 | ì„¤ëª… |
|------|--------|--------|------|
| **íƒ€ê²Ÿ** | ì˜¤ëŠ˜ Close | ë‚´ì¼ Close | Step25ê°€ ì§„ì§œ ì˜ˆì¸¡ |
| **EMA/SMA** | í¬í•¨ | ì œì™¸ | Data Leakage ì œê±° |
| **BB** | í¬í•¨ | ì œì™¸ | Data Leakage ì œê±° |
| **RÂ²** | 0.8001 | 0.8198 | ê±°ì˜ ë¹„ìŠ·! |
| **ì‹¤ì „ ì‚¬ìš©** | âŒ ë¶ˆê°€ëŠ¥ | âœ… ê°€ëŠ¥ | Step25ë§Œ ìœ íš¨ |

### 6.3 êµí›ˆ

```
ë†’ì€ ì •í™•ë„ â‰  ì¢‹ì€ ëª¨ë¸

âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸:
1. Data Leakage í™•ì¸
2. Train/Test ì™„ì „ ë¶„ë¦¬
3. ì‹¤ì „ ì‹œë®¬ë ˆì´ì…˜ (ë°±í…ŒìŠ¤íŒ…)
4. Out-of-sample í…ŒìŠ¤íŠ¸

âš ï¸ ì˜ì‹¬ ì‹ í˜¸:
- RÂ² > 0.95 (ë„ˆë¬´ ë†’ìŒ)
- ë³€ìˆ˜ì™€ íƒ€ê²Ÿ ìƒê´€ê´€ê³„ > 0.95
- Test ì„±ëŠ¥ >> Train ì„±ëŠ¥
```

---

## ğŸ“ˆ 7. Step25 ElasticNet ì¥ë‹¨ì 

### 7.1 ì¥ì 

**1. ì™¸ì‚½ ê°€ëŠ¥ (Extrapolation)**
```
âœ… Train: $10k ~ $73k
âœ… Test:  $50k ~ $113k
âœ… ì˜ˆì¸¡: ì„ í˜• í•¨ìˆ˜ë¡œ ë²”ìœ„ ë°– ì˜ˆì¸¡ ê°€ëŠ¥
```

**2. ìë™ ë³€ìˆ˜ ì„ íƒ**
```
âœ… 67ê°œ â†’ 59ê°œ ìë™ ì„ íƒ (L1)
âœ… ì¤‘ìš”í•œ ë³€ìˆ˜ë§Œ ì‚¬ìš©
âœ… í•´ì„ ê°€ëŠ¥
```

**3. ë‹¤ì¤‘ê³µì„ ì„± í•´ê²°**
```
âœ… EMA5 ~ EMA200 (ìƒê´€ê´€ê³„ ë†’ìŒ)
âœ… L2ê°€ ì•ˆì •ì ìœ¼ë¡œ ì²˜ë¦¬
âœ… ê³„ìˆ˜ í­ë°œ ë°©ì§€
```

**4. ê³¼ì í•© ë°©ì§€**
```
âœ… Train RÂ²: 0.96
âœ… Test RÂ²:  0.82
âœ… ì°¨ì´ 0.14 (ì ì ˆí•¨)
```

**5. ë¹ ë¥¸ í•™ìŠµ ì†ë„**
```
âœ… ì„ í˜• ëª¨ë¸ (O(nÃ—p))
âœ… Random Forest/XGBoostë³´ë‹¤ 10ë°° ë¹ ë¦„
```

### 7.2 ë‹¨ì 

**1. ë¹„ì„ í˜• ê´€ê³„ ëª» ì¡ìŒ**
```
âŒ y = xÂ² ê°™ì€ ê´€ê³„ëŠ” í•™ìŠµ ë¶ˆê°€
âŒ ìƒí˜¸ì‘ìš© ëª…ì‹œì ìœ¼ë¡œ ì¶”ê°€ í•„ìš”
```

**2. ì´ìƒì¹˜ ë¯¼ê°**
```
âŒ ê·¹ë‹¨ê°’ì´ ì„ í˜• ê´€ê³„ ì™œê³¡ ê°€ëŠ¥
âŒ ì „ì²˜ë¦¬ í•„ìˆ˜
```

**3. ì„ í˜• ê°€ì • ì œì•½**
```
âŒ ëª¨ë“  ê´€ê³„ë¥¼ ì„ í˜•ìœ¼ë¡œ ê°€ì •
âŒ ë³µì¡í•œ íŒ¨í„´ í¬ì°© ì œí•œì 
```

---

## ğŸ¯ 8. ì‹¤ì „ í™œìš©

### 8.1 ElasticNet ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

**âœ… ì í•©í•œ ê²½ìš°**:
1. ê°€ê²© ì˜ˆì¸¡ (íšŒê·€)
2. ë³€ìˆ˜ í•´ì„ í•„ìš”
3. ë¹ ë¥¸ í•™ìŠµ í•„ìš”
4. ì™¸ì‚½ í•„ìš” (ë²”ìœ„ ë°– ì˜ˆì¸¡)

**âŒ ë¶€ì í•©í•œ ê²½ìš°**:
1. ë¹„ì„ í˜• ê´€ê³„ ê°•í•¨
2. ì´ë¯¸ì§€/í…ìŠ¤íŠ¸ ë°ì´í„°
3. ë³µì¡í•œ ìƒí˜¸ì‘ìš© ë§ìŒ

### 8.2 ê¶Œì¥ ê°œì„  ì‚¬í•­

**1. Feature Engineering**
```python
# ìƒí˜¸ì‘ìš© ì¶”ê°€
df['SPX_x_QQQ'] = df['SPX'] * df['QQQ']
df['Volume_x_RSI'] = df['Volume'] * df['RSI']
```

**2. í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹**
```python
# Grid Search
alphas = [0.1, 0.5, 1.0, 2.0, 5.0]
l1_ratios = [0.3, 0.5, 0.7, 0.9]

# Cross-Validation
for alpha in alphas:
    for l1_ratio in l1_ratios:
        model = ElasticNet(alpha=alpha, l1_ratio=l1_ratio)
        # ...
```

**3. ì•™ìƒë¸”**
```python
# ElasticNet + RandomForest ì•™ìƒë¸”
pred_elastic = model_elastic.predict(X_test)
pred_rf = model_rf.predict(X_test)
pred_final = 0.7 * pred_elastic + 0.3 * pred_rf
```

---

## ğŸ“Š 9. ê²°ë¡ 

### 9.1 Step25 í•µì‹¬ ë°œê²¬

```
1. ElasticNetì´ 10ê°œ ëª¨ë¸ ì¤‘ 1ë“±
   - Test RÂ²: 0.8198
   - RMSE: $8,710
   - ì™¸ì‚½ ê°€ëŠ¥: âœ…

2. ì„ í˜• ëª¨ë¸ >> íŠ¸ë¦¬ ëª¨ë¸ (BTC ê°€ê²© ì˜ˆì¸¡)
   - ElasticNet: 0.82
   - Random Forest: -2.85
   - ì´ìœ : ì™¸ì‚½ ë¬¸ì œ

3. Data Leakage ì œê±° í•„ìˆ˜
   - EMA/SMA_close ì œì™¸
   - Bollinger Bands ì œì™¸
   - ì˜¤ëŠ˜ ê°€ê²© ì œì™¸

4. 67ê°œ ë³€ìˆ˜ ì‚¬ìš©
   - 59ê°œ í™œì„±í™” (88%)
   - 8ê°œ ì œê±° (L1)
```

### 9.2 ì‹¤ì „ ê¶Œì¥ ì‚¬í•­

```
âœ… DO:
1. ElasticNet ìš°ì„  ì‹œë„
2. Data Leakage ì² ì €íˆ ê²€ì¦
3. ë°±í…ŒìŠ¤íŒ…ìœ¼ë¡œ ê²€ì¦
4. í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹

âŒ DON'T:
1. ë†’ì€ RÂ²ë§Œ ë³´ê³  íŒë‹¨
2. Random Forest ë§¹ì‹ 
3. Train ë°ì´í„°ë¡œë§Œ í‰ê°€
4. ì™¸ì‚½ ë¬¸ì œ ë¬´ì‹œ
```

### 9.3 ë‹¤ìŒ ë‹¨ê³„

**Step26-28**: ë°±í…ŒìŠ¤íŒ…
- ElasticNet ì‹¤ì „ ì„±ê³¼
- ë°©í–¥ ì˜ˆì¸¡ vs ê°€ê²© ì˜ˆì¸¡
- ë¦¬ìŠ¤í¬ ê´€ë¦¬

**Step31**: ETF ì „í›„ ë¹„êµ
- ì‹œì¥ êµ¬ì¡° ë³€í™”
- ì¤‘ìš” ë³€ìˆ˜ ë³€í™”
- ëª¨ë¸ ì¬í•™ìŠµ í•„ìš”ì„±

---

## ğŸ“‹ ìš”ì•½ ì¹´ë“œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step25: ElasticNet ë‹¤ìŒë‚  ê°€ê²© ì˜ˆì¸¡     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ëª¨ë¸: ElasticNet (alpha=1.0, l1=0.5)   â”‚
â”‚ ë³€ìˆ˜: 67ê°œ (22ê°œ ì œì™¸)                  â”‚
â”‚                                         â”‚
â”‚ ì„±ëŠ¥:                                   â”‚
â”‚   Test RÂ²: 0.8198 (82% ì„¤ëª…)          â”‚
â”‚   RMSE: $8,710                          â”‚
â”‚   ë°©í–¥ ì •í™•ë„: 65.4%                    â”‚
â”‚                                         â”‚
â”‚ ì¥ì :                                   â”‚
â”‚   âœ… ì™¸ì‚½ ê°€ëŠ¥ (ì„ í˜• ëª¨ë¸)              â”‚
â”‚   âœ… ìë™ ë³€ìˆ˜ ì„ íƒ (L1)                â”‚
â”‚   âœ… ë‹¤ì¤‘ê³µì„ ì„± í•´ê²° (L2)               â”‚
â”‚   âœ… ê³¼ì í•© ë°©ì§€                        â”‚
â”‚                                         â”‚
â”‚ í•µì‹¬ ë°œê²¬:                              â”‚
â”‚   ğŸ”‘ ì„ í˜• ëª¨ë¸ >> íŠ¸ë¦¬ ëª¨ë¸            â”‚
â”‚   ğŸ”‘ Data Leakage ì œê±° í•„ìˆ˜            â”‚
â”‚   ğŸ”‘ ì‹¤ì „ ì‚¬ìš© ê°€ëŠ¥í•œ ì„±ëŠ¥              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
